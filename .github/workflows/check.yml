name: Check changed folders

on:
  workflow_call:
    outputs:
        packages:
          value: ${{ jobs.changes.outputs.packages }}
jobs:
  changes:
    runs-on: ubuntu-latest
    outputs:
      packages: ${{ steps.filter.outputs.changes }}
    steps:
      - uses: actions/checkout@v3
      - uses: dorny/paths-filter@v2
        id: filter
        with:
          filters: |
            commodity:
              - 'services/commodity/**'
            dynamic:
              - 'services/dynamic/**'
            pricing:
              - 'services/pricing/**'
              - '!services/pricing/workers/'
            pricing-worker:
              - 'services/pricing/workers/**'

